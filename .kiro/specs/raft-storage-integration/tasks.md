# Raft 与存储层集成任务

## 阶段1: 核心集成 (2周)

- [x] 1. 实现 RedisStorageEngine



  - [x] 1.1 创建结构体和基础方法 - _需求: 2.1, 2.2_


  - [x] 1.2 实现批量操作 - _需求: 2.4_


  - [x] 1.3 实现快照功能 - _需求: 2.5_



- [x] 2. 实现 RaftStorageAdaptor





  - [x] 2.1 创建 Adaptor 包装 - _需求: 1.1_


  - [x] 2.2 实现日志接口 - _需求: 1.3_


  - [x] 2.3 实现快照接口 - _需求: 1.5_



- [x] 3. 修改 KiwiStateMachine





  - [x] 3.1 连接 RedisStorageEngine - _需求: 2.1_


  - [x] 3.2 修改命令处理 - _需求: 2.2_


-

- [x] 4. 修改 RaftNode




  - [x] 4.1 移除 simple_mem_store - _需求: 5.1_


  - [x] 4.2 使用真实存储 - _需求: 5.2_


-

- [x] 5. 实现写操作路由




  - [x] 5.1 创建 RequestRouter - _需求: 3.1_


  - [x] 5.2 实现写路由 - _需求: 3.2_



## 阶段2: 读操作 (1周)

- [x] 6. 实现读操作路由





  - [x] 6.1 实现强一致性读 - _需求: 4.1_


  - [x] 6.2 实现最终一致性读 - _需求: 4.2_




- [x] 7. 集成网络层




  - [x] 7.1 修改命令处理 - _需求: 6.1_


  - [x] 7.2 实现模式切换 - _需求: 6.1_



## 阶段3: 故障和优化 (1周)
-

- [x] 8. 故障转移





  - [x] 8.1 测试 Leader 选举 - _需求: 8.1_

  - [x] 8.2 实现请求重定向 - _需求: 8.3_



- [x] 9. 配置变更





  - [x] 9.1 实现添加节点 - _需求: 10.1_



  - [x] 9.2 实现移除节点 - _需求: 10.2_

-

- [x] 10. 性能优化




  - [x] 10.1 批量写入 - _需求: 11.1_


  - [x] 10.2 本地读 - _需求: 11.2_



## 阶段4: 测试 (1周)
-

- [x] 11. 单元测试 - _需求: 12.1_






- [ ] 12. 集成测试 - _需求: 12.2_
- [ ] 13. 性能测试 - _需求: 12.5_
